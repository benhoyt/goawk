
TODO:
- print annotated to stdout or err?
- should somehow interact with -d ?


https://go.dev/blog/cover


goawk -f a.awk -coverprofile c.out -covermode set/count    # generates coverage report
goawk -f a.awk -covermode set                              # to stdout

go tool cover -html=c.out
go tool cover -func=c.out                # this will not work, we'll have below


goawk -coverreport c.out -func           # analogous to `go tool cover -func=c.out`
goawk -coverreport c.out                 # 77.5


-----
Options:

-coverprofile
    set the cover report filename to put collected coverage profile data.
    If this option is omitted, but the -covermode is set - outputs the annotated awk source to stdout.
-covermode
    Can have one of two values:
        set: did each statement run?
        count: how many times did each statement run?

todo:
-coverreport


-----

Usage of 'go tool cover':
Given a coverage profile produced by 'go test':
	go test -coverprofile=c.out

Open a web browser displaying annotated source code:
	go tool cover -html=c.out

Write out an HTML file instead of launching a web browser:
	go tool cover -html=c.out -o coverage.html

Display coverage percentages to stdout for each function:
	go tool cover -func=c.out

Finally, to generate modified source code with coverage annotations
(what go test -cover does):
	go tool cover -mode=set -var=CoverageVariableName program.go